# =============================================================================
# Vehicle parameters for the Traxxas Maxx 4S Ackermann RC car
# Mirrors the structure from CL2-UWaterloo/Raceline-Optimization params/f110.ini
# but with values measured from our platform.
# =============================================================================

[GENERAL_OPTIONS]

ggv_file="ggv.csv"
ax_max_machines_file="ax_max_machines.csv"

stepsize_opts={"stepsize_prep": 0.1,
 "stepsize_reg": 0.3,
 "stepsize_interp_after_opt": 0.2}

reg_smooth_opts={"k_reg": 3,
 "s_reg": 10}

curv_calc_opts = {"d_preview_curv": 0.2,
 "d_review_curv": 0.2,
 "d_preview_head": 0.1,
 "d_review_head": 0.1}

# Measured from our Traxxas Maxx 4S platform
# v_max     : conservative indoor limit  (paper targets up to 10 m/s)
# length    : bumper to bumper
# width     : widest point including tires
# mass      : with battery + compute + sensors
# curvlim   : 1/R_min = 1/0.35 â‰ˆ 2.86 rad/m
veh_params = {"v_max": 10.0,
 "length": 0.40,
 "width": 0.30,
 "mass": 4.5,
 "dragcoeff": 0.08,
 "curvlim": 2.86,
 "g": 9.81}

vel_calc_opts = {"dyn_model_exp": 1.0,
 "vel_profile_conv_filt_window": null}

# =============================================================================
[OPTIMIZATION_OPTIONS]

optim_opts_shortest_path={"width_opt": 0.35}

optim_opts_mincurv={"width_opt": 0.35,
 "iqp_iters_min": 3,
 "iqp_curverror_allowed": 0.01}

optim_opts_mintime={"width_opt": 0.35,
 "penalty_delta": 10.0,
 "penalty_F": 0.01,
 "mue": 0.35,
 "n_gauss": 5,
 "dn": 0.25,
 "limit_energy": false,
 "energy_limit": 2.0,
 "safe_traj": false,
 "ax_pos_safe": null,
 "ax_neg_safe": null,
 "ay_safe": null,
 "w_tr_reopt": 0.5,
 "w_veh_reopt": 0.35,
 "w_add_spl_regr": 0.15,
 "step_non_reg": 0,
 "eps_kappa": 1e-3}

# Measured / estimated for Traxxas Maxx 4S
# wheelbase front/rear split evenly around CG
# (total wheelbase L = 0.1869 m)
vehicle_params_mintime = {"wheelbase_front": 0.09345,
 "wheelbase_rear": 0.09345,
 "track_width_front": 0.137,
 "track_width_rear": 0.145,
 "cog_z": 0.065,
 "I_z": 0.035,
 "liftcoeff_front": 0.0,
 "liftcoeff_rear": 0.0,
 "k_brake_front": 0.0,
 "k_drive_front": 0.0,
 "k_roll": 0.5,
 "t_delta": 0.15,
 "t_drive": 0.08,
 "t_brake": 0.08,
 "power_max": 1500.0,
 "f_drive_max": 120.0,
 "f_brake_max": 300.0,
 "delta_max": 0.4887}

tire_params_mintime = {"c_roll": 0.015,
 "f_z0": 45.0,
 "B_front": 10.0,
 "C_front": 2.5,
 "eps_front": -0.1,
 "E_front": 1.0,
 "B_rear": 10.0,
 "C_rear": 2.5,
 "eps_rear": -0.1,
 "E_rear": 1.0}

pwr_params_mintime = {"pwr_behavior": false}
